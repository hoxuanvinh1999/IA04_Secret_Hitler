<html>
   <head>
         <meta charset="UTF-8">
         <link rel="stylesheet" href="decoration.css">
         <title>Secret Hitler</title>
   </head>
   <body>
      <div class="title">

      </div>
      <div class="welcome center">
         <p id="connect">
            
         </p>
      </div>
      <div class="welcome center">
         <p id="result">
            
         </p>
      </div>
      <div class="welcome center">
         <p id="notification">
            
         </p>
      </div>
      <div class='board'>
         <div class='liberal_board'>
            <div class="liberal_card" id="liberal_card_1">
            </div>
            <div class="liberal_card" id="liberal_card_2">
            </div>
            <div class="liberal_card" id="liberal_card_3">
            </div>
            <div class="liberal_card" id="liberal_card_4">
            </div>
            <div class="liberal_card" id="liberal_card_5">
            </div>


         </div>
         <div class='fascist_board'>
            <div class="fascist_card" id="fascist_card_1">

            </div>
            <div class="fascist_card" id="fascist_card_2">

            </div>
            <div class="fascist_card" id="fascist_card_3">

            </div>
            <div class="fascist_card" id="fascist_card_4">

            </div>
            <div class="fascist_card" id="fascist_card_5">

            </div>
            <div class="fascist_card" id="fascist_card_6">

            </div>
         </div>
       </div>
      <div class="player_board">
         <div class="player">
            <div id="president_name">
               
            </div>
            <div class="player_name" id="president_name_title">
               
            </div>
         </div>
         <div class="player">
            <div id="chancellor_name">
               
            </div>
            <div class="player_name" id="chancellor_name_title">
               
            </div>
            <div class="player_answer" id="chancellor_question">
               
            </div>
         </div>
         <div class="player">
            <div id="candidat_name">
               
            </div>
            <div class="player_name" id="candidat_name_title">
               
            </div>
            <div id="result_vote_card">
              
            </div>
         </div>
         <div class="player">
            <div class="player_name" id="player_name_0">
               
            </div>
            <div class="player_side" id="player_side_0">
               
            </div>
            <div class="player_name" id="player_status_0">
               
            </div>
            <div class="player_answer" id="player_answer_0">
               
            </div>
         </div>
         <div class="player">
            <div class="player_name" id="player_name_1">
              
            </div>
            <div class="player_side" id="player_side_1">
              
            </div>
            <div class="player_name" id="player_status_1">
               
            </div>
            <div class="player_answer" id="player_answer_1">
               
            </div>
         </div>
         <div class="player">
            <div class="player_name" id="player_name_2">
               
            </div>
            <div class="player_side" id="player_side_2">
               
            </div>
            <div class="player_name" id="player_status_2">
               
            </div>
            <div class="player_answer" id="player_answer_2">
               
            </div>
         </div>
         <div class="player">
            <div class="player_name" id="player_name_3">
               
            </div>
            <div class="player_side" id="player_side_3">
               
            </div>
            <div class="player_name" id="player_status_3">
               
            </div>
            <div class="player_answer" id="player_answer_3">
               
            </div>
         </div>
         <div class="player">
            <div class="player_name" id="player_name_4">
               
            </div>
            <div class="player_side" id="player_side_4">
               
            </div>
            <div class="player_name" id="player_status_4">
               
            </div>
            <div class="player_answer" id="player_answer_4">
               
            </div>
         </div>
         <div class="player">
            <div class="player_name" id="player_name_5">
               
            </div>
            <div class="player_side" id="player_side_5">
               
            </div>
            <div class="player_name" id="player_status_5">
               
            </div>
            <div class="player_answer" id="player_answer_5">
               
            </div>
         </div>
           <div class="player">
            <div class="player_name" id="player_name_6">
               
            </div>
            <div class="player_side" id="player_side_6">
               
            </div>
            <div class="player_name" id="player_status_6">
               
            </div>
            <div class="player_answer" id="player_answer_6">
               
            </div>
         </div>
         <div class="player">
            <div class="player_name" id="player_name_7">
               
            </div>
            <div class="player_side" id="player_side_7">
               
            </div>
            <div class="player_name" id="player_status_7">
               
            </div>
            <div class="player_answer" id="player_answer_7">
               
            </div>
         </div>
         <div class="player">
            <div class="player_name" id="player_name_8">
               
            </div>
            <div class="player_side" id="player_side_8">
               
            </div>
            <div class="player_name" id="player_status_8">
               
            </div>
            <div class="player_answer" id="player_answer_8">
               
            </div>
         </div>
         <div class="player">
            <div class="player_name" id="player_name_9">
               
            </div>
            <div class="player_side" id="player_side_9">
               
            </div>
            <div class="player_name" id="player_status_9">
               
            </div>
            <div class="player_answer" id="player_answer_9">
               
            </div>
         </div>
      </div>

      <ol id="body">
    
      </ol>
   </body>

   <script>
      // Create WebSocket connection.
    const socket = new WebSocket('ws://localhost:8000/websoc');
    
    
    // Connection opened
    socket.addEventListener('open', function (event) {
        document.getElementById("connect").innerText = "Connected to server - The Game started"
    });
    
    // Listen for messages
    socket.addEventListener('message', function (event) {
      
      var body = document.getElementById("body")
      var list = document.createElement("li")

      if( event.data.charAt(0) == "0"){

         position_index = event.data.charAt(1)
         element_id = "player_name_" + position_index
         document.getElementById(element_id).textContent = event.data.slice(2)


         //list.innerHTML = event.data
         //body.appendChild(list)

      }
      if( event.data.charAt(0) == "1"){

         position_index = event.data.charAt(1)
         element_id = id="player_side_" + position_index
         if (event.data.slice(2) == "Hitler"){
            document.getElementById(element_id).style.backgroundImage = 'url(./image/hitler.png)';
         }
         if (event.data.slice(2) == "Liberal"){
            document.getElementById(element_id).style.backgroundImage = 'url(./image/liberal.png)';
         }
         if (event.data.slice(2) == "Fascist"){
            document.getElementById(element_id).style.backgroundImage = 'url(./image/fascist.png)';
         }
         


         //list.innerHTML = event.data
         //body.appendChild(list)

      }
      if( event.data.charAt(0) == "2"){

         position_index = event.data.charAt(1)
         element_id = id="player_status_" + position_index
         document.getElementById(element_id).textContent = event.data.slice(2)


         //list.innerHTML = event.data
         //body.appendChild(list)

      }
      if( event.data.charAt(0) == "3"){

         element_id = "president_name_title"
         document.getElementById(element_id).textContent = event.data.slice(1)


         //list.innerHTML = event.data
         //body.appendChild(list)

      }

      if( event.data.charAt(0) == "4"){

         element_id = "chancellor_name_title"
         document.getElementById(element_id).textContent = event.data.slice(1)


         //list.innerHTML = event.data
         //body.appendChild(list)

      }

      if( event.data.charAt(0) == "5"){

         position_index = event.data.charAt(1)
         document.getElementById("liberal_card_" + position_index).style.backgroundImage = 'url(./image/Liberal_card.png)';
         // document.getElementById("liberal_card_" + position_index).textContent = "X"
         // for (let i = 0; i < parseInt(position_index); i++) {
         //    document.getElementById("liberal_card_" + i.toString()).textContent = "X"
         // }  

         //list.innerHTML = event.data
         //body.appendChild(list)

      }
 

      if( event.data.charAt(0) == "6"){

         position_index = event.data.charAt(1)

         document.getElementById("fascist_card_" + position_index).style.backgroundImage = 'url(./image/Fascist_card.png)';

         // for (let i = 0; i< parseInt(position_index) ;i++){
         //    element_id = "fascist_card_" + i.toString()
         //    document.getElementById(element_id).textContent = "X"
         // }

         //list.innerHTML = event.data
         //body.appendChild(list)

      }

      if( event.data.charAt(0) == "7"){

         document.getElementById("candidat_name_title").textContent = event.data.slice(1);

      }


      if( event.data.charAt(0) == "8"){
         if (event.data.slice(1) == "Ja"){
            document.getElementById("result_vote_card").style.backgroundImage = 'url(./image/ja.png)';
         }
         else{
            document.getElementById("result_vote_card").style.backgroundImage = 'url(./image/nein.png)';
         }

      }

      if(event.data.charAt(0) == "9"){
         document.getElementById("result").innerText = event.data.slice(1);
      }

      if(event.data.charAt(0) == "x"){
         document.getElementById("notification").innerText = event.data.slice(1);
      }else if(event.data.charAt(0) == "z"){
         document.getElementById("notification").innerText = "";
      }

      if(event.data.charAt(0) == "q"){
         document.getElementById("chancellor_question").textContent = event.data.slice(1)
      }
      if(event.data.charAt(0) == "a"){
         position_index = event.data.charAt(1)
         element_id = "player_answer_" + position_index
         document.getElementById(element_id).textContent = event.data.slice(2)
      }
      // else{
         
      //    list.innerHTML = event.data 
      //    body.appendChild(list)
      // }
      
       
    });
    
    </script>


</html>
